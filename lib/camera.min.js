!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Camera=e():t.Camera=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,i){"use strict";function n(t,e){var i={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},a=function t(e){o(this,t),s.call(this),this.streaming=!1,this.defaultOptions={video:null,canvas:null,photo:null,playButton:null,width:360,height:0},this.requiredFields=["video","photo","playButton"],this.options={},this.start(e)},s=function(){var t=this;this.start=function(e){t.checkOptions(e),t.createDefaults(),t.init()},this.checkOptions=function(e){t.options=r({},t.defaultOptions,e);var i=t.options,o=(i.root,n(i,["root"]));for(var a in o)if(o.hasOwnProperty(a)){if(!o[a]&&t.requiredFields.includes(a))return void console.error("Error in initializing., "+a+" not defined..!");console.info("Options --\x3e ",a)}},this.createDefaults=function(){var e=document.createElement("canvas");e.setAttribute("style","display:none"),document.body.appendChild(e),t.options.canvas=e},this.init=function(){var e=t.options,i=e.video,n=(e.photo,e.playButton),o=e.width,r=e.canvas;void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(t){var e=navigator.getUserMedia||navigator.msGetUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return e?new Promise(function(i,n){e.call(navigator,t,i,n)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(function(e){"srcObject"in i?i.srcObject=e:i.src=window.URL.createObjectURL(e),i.onloadedmetadata=function(e){i.play(),t.initialized=!0}}).catch(function(t){console.log(t.name+": "+t.message)}),i.addEventListener("canplay",function(e){if(!t.streaming){var n=i.videoHeight/(i.videoWidth/o);isNaN(n)&&(n=o/(4/3)),t.options.height=n,i.setAttribute("width",o),i.setAttribute("height",n),r.setAttribute("width",o),r.setAttribute("height",n),t.streaming=!0}},!1),n.addEventListener("click",function(e){t.takeSnapShot(),e.preventDefault()},!1),t.clearImage()},this.takeSnapShot=function(){var e=t.options,i=e.video,n=e.photo,o=(e.playButton,e.width),r=e.canvas,a=e.height,s=r.getContext("2d");if(o&&a){r.width=o,r.height=a,s.drawImage(i,0,0,o,a);var c=r.toDataURL("image/png");n.setAttribute("src",c)}else t.clearImage()},this.clearImage=function(){var e=t.options,i=(e.video,e.photo),n=(e.playButton,e.width,e.canvas),o=n.getContext("2d");o.fillStyle="#800080",o.fillRect(0,0,n.width,n.height);var r=n.toDataURL("image/png");i.setAttribute("src",r)}};e.default=a},function(t,e,i){"use strict";t.exports=i(0).default}])});